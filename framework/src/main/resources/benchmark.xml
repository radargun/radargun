<bench-config xmlns="urn:radargun:benchmark:1.1">

   <!-- 
      Define where the master process listens for connections from slaves.
      The master process coordinates the slaves for running the distributed benchmark
    -->
   <master bindAddress="${127.0.0.1:master.address}" port="${2103:master.port}"/>

   <!--
      Configure the stages of the benchmark.
      The master will coordinate all the slaves, so that each stage starts on all the slaves at the same time.
      The attributes "initSize", "maxSize" and "increment" defines the rage of slaves the benchmark will be run on.
    -->
   <benchmark initSize="2" maxSize="${4:slaves}" increment="1">
      <DestroyWrapper runOnAllSlaves="true"/>
      <StartCluster staggerSlaveStartup="true" delayAfterFirstSlaveStarts="5000" delayBetweenStartingSlaves = "500"/>
      <ClusterValidation partialReplication="false"/>
      <StressTestWarmup numRequests="2500" opsCountStatusLog="500" numThreads="2"/>
      <ClearCluster/>
      <!--
         This will average to 10000 requests per thread, although a work-stealing pattern is used so some threads may
         do more work than others.
       -->
      <StressTest numRequests="2500" opsCountStatusLog="500" numThreads="2"/>
      <CsvReportGeneration/>
   </benchmark>

   <!--
      Specify which product/configs are benchmarked. 
      For each such (product, config) combination, the benchmark (described by benchmark element) is run.
   -->
   <products>
      <infinispan52>
         <config name="repl-sync.xml"/>
         <config name="dist-sync.xml"/>
      </infinispan52>
      <jbosscache3>
         <config name="mvcc/mvcc-repl-sync.xml"/>
      </jbosscache3>
   </products>

   <!--
      Configures the reports to be generated.
   -->
   <reports>
      <report name="Replicated">
         <item product="infinispan52" config="repl-sync.xml"/>
         <item product="jbosscache3" config="*"/>
      </report>
      <report name="DistVsRepl">
         <item product="infinispan52" config="repl-sync.xml"/>
         <item product="infinispan52" config="dist-sync.xml"/>
      </report>
      <report name="All" includeAll="true"/>
   </reports>

</bench-config>
